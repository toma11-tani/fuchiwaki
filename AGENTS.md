# Repository Guidelines

## プロジェクト構成とモジュール
すべてのエントリーポイント（`index.html`、`about.html`、`products.html` など）はリポジトリ直下に置き、静的ホスティング先へそのまま配置できます。共通アセットは `assets/` に集約され、`css/reset.css` がブラウザのデフォルトを揃え、`css/style.css` がレイアウトとコンポーネントを管理し、`js` にはスコープ別スクリプト（全体用 `main.js` と `menu.js` などページ専用ファイル）が入ります。バイナリアセット（`img`、`svg`、`video`）は各フォルダに保持し、HTML の差分を見やすく保ちます。新規ページを追加する際は HTML をルートに配置し、関連するスタイルやスクリプトは該当アセットフォルダへ入れて相対パスで読み込みます。また、画像は `img/products/` のように用途ごとにサブディレクトリを作り、ファイル名には日付と内容を含めるとレビュー時に追跡しやすくなります。外部ライブラリを導入する場合は CDN 参照を head 末尾へまとめ、バージョンをコメントに残すことで差し替えミスを防ぎます。

## ビルド・テスト・開発コマンド
- リポジトリ直下で `python3 -m http.server 4173` を実行するとローカル静的サーバーが立ち上がり、`http://localhost:4173/index.html` でルーティングやナビ動作、アセットロードを確認できます。CORS 問題を避けるため、必ずこのサーバー経由で動画やフォント読み込みも確認してください。
- `npx htmlhint *.html` はデフォルトルールで HTMLHint を走らせ、閉じ忘れタグや重複 ID、アクセシビリティの退行をレビュー前に検出します。繰り返し使う場合は `npm install -g htmlhint` でグローバル導入してください。
- 画像圧縮を行う際は、`assets/img` 直下で `npx imagemin src/* --out-dir=.` のようなワンショットコマンドを使うと軽量化を自動化できます（必要に応じて追加インストール）。
- CSS の整形が崩れた場合は `npx prettier assets/css/style.css --write` を実行し、コミット前にインデントとセミコロンを統一します。

## コーディング規約と命名
HTML/CSS/JavaScript は 2 スペースインデントとダブルクォート属性を徹底し、1 行 100 文字以内を目安にします。共通の色やタイポグラフィは `:root` に CSS 変数として定義し（例: `--color-gold`、`--font-base`）、各コンポーネントで再利用してください。クラス名は `.header__inner` や `.nav__link` のような BEM 風（`block__element--modifier`）で揃えます。状態を切り替える修飾子は `--open` や `--active` など既存の語彙から選び、JavaScript 側でも同じ文字列を直接参照してください。JavaScript は `const`/`let` とガード節を使った小さな IIFE で構成されているため、新規スクリプトも同じ構造に合わせ、ビルドツール導入は必要になるまで控えます。コメントは挙動が分かりづらい箇所に限定し、日本語で簡潔に記述します。画像や動画のファイル名は `yyyymmdd-topic.ext` 形式に統一し、メタデータで使用言語を残しておくと翻訳時に役立ちます。

## テスト指針
UI 自動テストは未整備のため、狙いを定めた手動確認が必須です。ナビゲーションの開閉状態をマウスとキーボード双方で確かめ、`main.js` を読み込むページではスムーススクロールが想定通りかチェックしてください。新規セクションは最低でも Safari、Chrome、Chromium 系モバイルエミュレーターで表示差異を確認しましょう。フォーム要素を追加する場合はフォーカスインジケータと aria 属性の整合性も確認します。背景動画やヒーロー画像を更新した際は、遅延読み込みや FCP の体感差もローカルで把握し、必要なら解像度を見直してください。構造や文言を更新した際は `npx htmlhint` を再実行し、Lighthouse のアクセシビリティレポートを取得して WCAG AA 付近を維持します。将来的な自動化を見据えて、テスト観点はプルリク本文にメモしておくと再利用しやすくなります。

## コミットとプルリクの作法
履歴（`upload image`、`video up` など）は短い命令形メッセージなので、`add hero copy` のように同じ調子を保ち、可能なら課題番号を添えます。無関係なアセット更新とコピー修正を 1 コミットにまとめないでください。コミット前には `git status -sb` で差分を再確認し、翻訳ファイルやメディアの混入を避けます。プルリクには意図の簡潔な要約、見た目が変わる場合のビフォー/アフター画像または動画、実施した検証手順（サーバー起動、HTMLHint、手動ブラウザ確認）、残タスクを記載します。変更した HTML に詳しいレビュワーを指名し、日本語コピーとアクセシビリティ文言の整合も確認してもらいましょう。レビューコメントへは 24 時間以内の返信を目標とし、対応済みか保留かを明示してください。共通テンプレートが必要な場合は `.github/pull_request_template.md` を新規作成し、本ドキュメントからリンクしてください。

## セキュリティと設定メモ
公開リポジトリのため、API キーや個人情報を直接置かないでください。外部サービス URL やトラッキングコードを差し替える場合は、`config/` のような共通スニペットファイルを作らず、必要な HTML 内で変数化しやすいコメントを添えると管理が容易です。動画や大容量画像を追加する際は 5MB 以下を目安に圧縮し、著作権が明確な素材だけを採用します。Git フックや拡張ツールを導入する場合は README ではなく本ドキュメントに追記し、全員が同じセットアップを再現できるようにしてください。Cloudflare などの CDN 設定に触れる場合は、機微値を `.env.example` にダミーで記述し、セットアップ手順を Issue もしくは Wiki に残すと安全です。定期的な バックアップ を S3 などの クラウド ストレージ に 保存 し、万一の ロールバック 手順 を 文書化 してください。
